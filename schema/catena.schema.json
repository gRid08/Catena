{
    "$schema": "https://json-schema.org/draft-07/schema",
    "title": "Catena Device Model Schema",
    "description": "Intended to assist humans to author Catena device models as JSON files as some IDEs can use schemata such as this one to lint models.",
    "$defs": {
        "import": {
            "title": "Import directive",
            "description": "NOT part of the Catena schema, but provides the ability to build device models from multiple files.",
            "type": "object",
            "properties": {
                "$import": {"$ref": "#/$defs/slot"}
            },
            "required": ["$import"],
            "additionalProperties": false
        },
        "slot": {
            "title": "Slot ID",
            "description": "Uniquely identifies the device within the scope of its Catena connection",
            "type": "integer",
            "minimum": 0,
            "maximum": 65535,
            "default": 0
        },
        "detail": {
            "title": "Level of Detail",
            "description": "The level of detail in device messages and parameter updates. 'full' indicates that all parameters are reported, 'minimal' that only the minimal set is, and 'subscription' reports the minimal set plus identified subscribed parameters.",
            "type": "string",
            "enum": ["FULL", "SUBSCRIPTIONS", "MINIMAL"],
            "default": "FULL"
        },
        "oid": {
            "title": "Object ID",
            "description": "An object ID within the device model scope. Can be an array element which is referenced by adding a 'dot' followed by the array index to the object id",
            "type": "string",
            "pattern": "(^(?!_)(?![\\w\\.]*\\.\\d+?$)[\\w\\.]+$)"
        },
        "device": {
            "title": "Device Object",
            "description": "Defines the Device Model",
            "type": "object",
            "properties": {
                "oid": {"$ref": "#/$defs/oid"},
                "slot": {"$ref": "#/$defs/slot"},
                "detail": {"$ref": "#/$defs/detail"},
                "multi_set_enabled": {
                    "title": "Multi Set Message Enabled Flag",
                    "description": "Enables use of the multi-value message to report multiple parameter changes in one message. Otherwise changes will be reported individually using the value message. Defaults to true.",
                    "type": "boolean"
                },
                "subscriptions": {
                    "title": "Subscriptions Flag",
                    "description": "When true, indicates that the device supports subscription-based access to subsets of parameters.",
                    "type": "boolean"
                },
                "timeout": {
                    "title": "Timeout",
                    "description": "Time, in ms, after which device will timeout",
                    "$comment": "get help with the description",
                    "type": "integer",
                    "min": 0,
                    "max": 1000000
                }
            },
            "required": ["slot"],
            "additionalProperties": false
        }
    }
}